<!-- Callouts für Feedback -->
<div class="bs-callout bs-callout-warning hidden">
  <h4>Oh snap!</h4>
  <p>This form seems to be invalid :(</p>
</div>

<div class="bs-callout bs-callout-info hidden">
  <h4>Yay!</h4>
  <p>Everything seems to be ok :)</p>
</div>

<!-- Formular -->
<form id="demo-form" data-parsley-validate="">
  <label for="fullname">Full Name * :</label>
  <input type="text" class="form-control" name="fullname" required />

  <label for="email">Email * :</label>
  <input
    type="email"
    class="form-control"
    name="email"
    data-parsley-trigger="change"
    required
  />

  <!-- Datei-Upload nach oben verschoben -->
  <label for="file">Please provide a file smaller than 42Kb:</label>
  <input
    type="file"
    name="file"
    required
    data-parsley-max-file-size="42"
    class="form-control"
  />

  <label for="contactMethod">Preferred Contact Method *:</label>
  <p>
    Email:
    <input
      type="radio"
      name="contactMethod"
      id="contactMethodEmail"
      value="Email"
      required
    />
    Phone:
    <input
      type="radio"
      name="contactMethod"
      id="contactMethodPhone"
      value="Phone"
    />
  </p>

  <label for="hobbies">Hobbies (Optional, but 2 minimum):</label>
  <p>
    Skiing
    <input
      type="checkbox"
      name="hobbies[]"
      value="ski"
      data-parsley-mincheck="2"
    /><br />
    Running <input type="checkbox" name="hobbies[]" value="run" /><br />
    Eating <input type="checkbox" name="hobbies[]" value="eat" /><br />
    Sleeping <input type="checkbox" name="hobbies[]" value="sleep" /><br />
    Reading <input type="checkbox" name="hobbies[]" value="read" /><br />
    Coding <input type="checkbox" name="hobbies[]" value="code" /><br />
  </p>

  <p>
    <label for="heard">Heard about us via *:</label>
    <select id="heard" required>
      <option value="">Choose..</option>
      <option value="press">Press</option>
      <option value="net">Internet</option>
      <option value="mouth">Word of mouth</option>
      <option value="other">Other..</option>
    </select>
  </p>

  <p>
    <label for="message">Message (20 chars min, 100 max) :</label>
    <textarea
      id="message"
      class="form-control"
      name="message"
      data-parsley-trigger="keyup"
      data-parsley-minlength="20"
      data-parsley-maxlength="100"
      data-parsley-minlength-message="Come on! You need to enter at least a 20 character comment.."
      data-parsley-validation-threshold="10"
    ></textarea>
  </p>

  <br />
  <input type="submit" class="btn btn-default" value="Validate" />

  <p>
    <small
      >* Please note: This form is just a demo of Parsley.js validation.</small
    >
  </p>
</form>

<!-- Custom Validator für File Size -->
<script type="text/javascript">
  window.Parsley.addValidator("maxFileSize", {
    validateString: function (_value, maxSize, parsleyInstance) {
      if (!window.FormData) {
        alert("Your browser is too old for this demo!");
        return true;
      }
      var files = parsleyInstance.$element[0].files;
      return files.length != 1 || files[0].size <= maxSize * 1024;
    },
    requirementType: "integer",
    messages: {
      en: "This file should not be larger than %s Kb",
    },
  });
</script>

<!-- Parsley-Setup für visuelles Feedback -->
<script type="text/javascript">
  $(function () {
    $("#demo-form")
      .parsley()
      .on("field:validated", function () {
        var ok = $(".parsley-error").length === 0;
        $(".bs-callout-info").toggleClass("hidden", !ok);
        $(".bs-callout-warning").toggleClass("hidden", ok);
      })
      .on("form:submit", function () {
        return false; // Kein echtes Submit
      });
  });
</script>

<!-- Styling für grün/rot Feedback -->
<style>
  input.parsley-success,
  select.parsley-success,
  textarea.parsley-success {
    color: #468847;
    background-color: #dff0d8;
    border: 1px solid #468847;
  }

  input.parsley-error,
  select.parsley-error,
  textarea.parsley-error {
    color: #b94a48;
    background-color: #f2dede;
    border: 1px solid #b94a48;
  }

  .hidden {
    display: none;
  }

  .bs-callout {
    padding: 15px;
    margin-top: 10px;
    border: 1px solid #eee;
    border-left-width: 5px;
    border-radius: 3px;
  }

  .bs-callout-warning {
    border-left-color: #f0ad4e;
  }

  .bs-callout-info {
    border-left-color: #5bc0de;
  }
</style>
